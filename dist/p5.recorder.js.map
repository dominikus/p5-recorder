{"version":3,"file":"p5.recorder.js","sources":["../src/index.js"],"sourcesContent":["(function() {\n  let _isRecording = false;\n  let _config = {};\n\n  let _status = \"\";\n\n  p5.prototype.startRecording = function (config) {\n    _isRecording = true;\n\n    _config = Object.assign({\n      frameRate: this.getFrameRate(),\n    });\n\n    console.log(this);\n\n    console.log(_config);\n\n    var worker = new Worker(\"ffmpeg-worker-mp4.js\");\n\n    worker.onmessage = function (e) {\n      var msg = e.data;\n      switch (msg.type) {\n        case \"ready\":\n          worker.postMessage({ type: \"run\", arguments: [\"-version\"] });\n          break;\n        case \"stdout\":\n          _status += msg.data + \"\\n\";\n          break;\n        case \"stderr\":\n          _status += msg.data + \"\\n\";\n          break;\n        case \"exit\":\n          console.log(\"Process exited with code \" + msg.data);\n          worker.terminate();\n          break;\n      }\n    };\n\n    noLoop();\n  };\n\n  function storeFrame() {\n    if (_isRecording) {\n      console.log(_status);\n      // redraw();\n    }\n  }\n\n  p5.prototype.registerMethod(\"post\", storeFrame);\n})();"],"names":["_isRecording","_config","_status","p5","prototype","startRecording","config","Object","assign","frameRate","this","getFrameRate","console","log","worker","Worker","onmessage","e","msg","data","type","postMessage","arguments","terminate","noLoop","registerMethod"],"mappings":"AAAA,IACMA,EACAC,EAEAC,EAHAF,GAAe,EACfC,EAAU,GAEVC,EAAU,GAEdC,GAAGC,UAAUC,eAAiB,SAAUC,GACtCN,GAAe,EAEfC,EAAUM,OAAOC,OAAO,CACtBC,UAAWC,KAAKC,iBAGlBC,QAAQC,IAAIH,MAEZE,QAAQC,IAAIZ,GAEZ,IAAIa,EAAS,IAAIC,OAAO,wBAExBD,EAAOE,UAAY,SAAUC,GAC3B,IAAIC,EAAMD,EAAEE,KACZ,OAAQD,EAAIE,MACV,IAAK,QACHN,EAAOO,YAAY,CAAED,KAAM,MAAOE,UAAW,CAAC,cAC9C,MACF,IAAK,SAGL,IAAK,SACHpB,GAAWgB,EAAIC,KAAO,KACtB,MACF,IAAK,OACHP,QAAQC,IAAI,4BAA8BK,EAAIC,MAC9CL,EAAOS,cAKbC,UAUFrB,GAAGC,UAAUqB,eAAe,OAP5B,WACMzB,GACFY,QAAQC,IAAIX"}